import{b as I,c as W}from"./account-DnEBmT1n.js";import{d as O,v as f,b as j,f as e,w as t,r as n,D as G,o as V,e as h,j as d,C as H,c as w,t as P,K as Q,E as C}from"./vendor-B-767y0k.js";import{_ as T}from"./index-A75kaW5P.js";import"./request-C0hLSC6d.js";const $={class:"app-container"},q={style:{display:"flex","justify-content":"space-between","align-items":"center"}},z={class:"filter-section"},M=O({__name:"character-sessions",setup(R){const _=f(!1),b=f([]),c=f(!1),o=f(null),i=f({connectKey:"",count:10}),y=async()=>{_.value=!0;try{const s=await W(i.value);b.value=s.sessions}catch(s){console.error("Failed to fetch character sessions:",s),C.error("Failed to fetch sessions")}finally{_.value=!1}},k=()=>{if(!i.value.connectKey){C.warning("Please enter a login connect key");return}y()},L=()=>{i.value={connectKey:"",count:10},b.value=[]},x=s=>{o.value={...s},c.value=!0},F=async()=>{if(o.value)try{await I({session:o.value}),C.success("Session updated successfully"),c.value=!1,y()}catch(s){console.error("Failed to update session:",s),C.error("Failed to update session")}},U=s=>{switch(s){case 0:return"OnGoing";case 1:return"Failed";case 2:return"ChallengingHoF";case 3:return"Finished";case 99:return"Quit";default:return"Unknown"}};return(s,l)=>{const S=n("el-input"),r=n("el-form-item"),m=n("el-input-number"),p=n("el-button"),g=n("el-form"),u=n("el-table-column"),B=n("el-table"),N=n("el-card"),v=n("el-option"),D=n("el-select"),E=n("el-dialog"),K=G("loading");return V(),j("div",$,[e(N,null,{header:t(()=>[h("div",q,[l[12]||(l[12]=h("span",null,"Character Sessions",-1)),h("div",z,[e(g,{inline:!0},{default:t(()=>[e(r,{label:"Login Connect Key"},{default:t(()=>[e(S,{modelValue:i.value.connectKey,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value.connectKey=a),placeholder:"Enter login connect key"},null,8,["modelValue"])]),_:1}),e(r,{label:"Limit"},{default:t(()=>[e(m,{modelValue:i.value.count,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value.count=a),min:1,max:100,"default-value":10},null,8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(p,{type:"primary",onClick:k},{default:t(()=>l[10]||(l[10]=[d("Search")])),_:1}),e(p,{onClick:L},{default:t(()=>l[11]||(l[11]=[d("Reset")])),_:1})]),_:1})]),_:1})])])]),default:t(()=>[H((V(),w(B,{data:b.value,style:{width:"100%"},"max-height":"70vh"},{default:t(()=>[e(u,{prop:"CharacterSessionId",label:"Session ID",width:"120"}),e(u,{prop:"CharacterId",label:"Character ID",width:"120"}),e(u,{prop:"CharacterName",label:"Character Name",width:"150"}),e(u,{prop:"CharacterBattleLevel",label:"Battle Level",width:"100"}),e(u,{prop:"WinCount",label:"Wins",width:"80"}),e(u,{prop:"LoseCount",label:"Loses",width:"80"}),e(u,{prop:"Coins",label:"Coins",width:"100"}),e(u,{prop:"CharacterSessionStatue",label:"Status",width:"120"},{default:t(({row:a})=>[d(P(U(a.CharacterSessionStatue)),1)]),_:1}),e(u,{prop:"CreateDate",label:"Start Date",width:"180"}),e(u,{label:"Operations",width:"120",fixed:"right"},{default:t(({row:a})=>[e(p,{type:"primary",size:"small",onClick:A=>x(a)},{default:t(()=>l[13]||(l[13]=[d(" Edit ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[K,_.value]])]),_:1}),e(E,{title:"Edit Character Session",modelValue:c.value,"onUpdate:modelValue":l[9]||(l[9]=a=>c.value=a),width:"60%"},{footer:t(()=>[e(p,{onClick:l[8]||(l[8]=a=>c.value=!1)},{default:t(()=>l[14]||(l[14]=[d("Cancel")])),_:1}),e(p,{type:"primary",onClick:F},{default:t(()=>l[15]||(l[15]=[d("Save")])),_:1})]),default:t(()=>[o.value?(V(),w(g,{key:0,model:o.value,"label-width":"140px"},{default:t(()=>[e(r,{label:"Character Name"},{default:t(()=>[e(S,{modelValue:o.value.CharacterName,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.CharacterName=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Battle Level"},{default:t(()=>[e(m,{modelValue:o.value.CharacterBattleLevel,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value.CharacterBattleLevel=a),min:1},null,8,["modelValue"])]),_:1}),e(r,{label:"Win Count"},{default:t(()=>[e(m,{modelValue:o.value.WinCount,"onUpdate:modelValue":l[4]||(l[4]=a=>o.value.WinCount=a),min:0},null,8,["modelValue"])]),_:1}),e(r,{label:"Lose Count"},{default:t(()=>[e(m,{modelValue:o.value.LoseCount,"onUpdate:modelValue":l[5]||(l[5]=a=>o.value.LoseCount=a),min:0},null,8,["modelValue"])]),_:1}),e(r,{label:"Coins"},{default:t(()=>[e(m,{modelValue:o.value.Coins,"onUpdate:modelValue":l[6]||(l[6]=a=>o.value.Coins=a),min:0},null,8,["modelValue"])]),_:1}),e(r,{label:"Status"},{default:t(()=>[e(D,{modelValue:o.value.CharacterSessionStatue,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.CharacterSessionStatue=a)},{default:t(()=>[e(v,{label:"OnGoing",value:0}),e(v,{label:"Failed",value:1}),e(v,{label:"ChallengingHoF",value:2}),e(v,{label:"Finished",value:3}),e(v,{label:"Quit",value:99})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])):Q("",!0)]),_:1},8,["modelValue"])])}}}),ee=T(M,[["__scopeId","data-v-01428a2c"]]);export{ee as default};
//# sourceMappingURL=character-sessions-Bch2aWyM.js.map
