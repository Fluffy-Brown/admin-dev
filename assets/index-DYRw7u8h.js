import{d as Je,a as C,v as c,A as je,B as Ee,b as v,e as g,f as p,w as n,F as S,t as H,C as Ye,c as u,h as Qe,g as Xe,E as _,r as s,D as Ze,o as i,i as T,u as V,j as D,G as er,l as j,H as ve,I as Ae,J as fe,K as Ie,L as we}from"./vendor-B-767y0k.js";import{s as U}from"./request-C0hLSC6d.js";import{d as rr,_ as ar}from"./index-A75kaW5P.js";var E=(e=>(e[e.DirectDamage=0]="DirectDamage",e[e.Fix=1]="Fix",e[e.Shield=2]="Shield",e[e.MutualDamage=3]="MutualDamage",e))(E||{}),Y=(e=>(e[e.None=0]="None",e[e.Fire=1]="Fire",e[e.Ice=2]="Ice",e[e.Blood=3]="Blood",e[e.Vamp=4]="Vamp",e[e.Death=5]="Death",e[e.Gun=6]="Gun",e[e.Dexerity=7]="Dexerity",e[e.Holy=8]="Holy",e))(Y||{}),Q=(e=>(e[e.Apply=0]="Apply",e[e.Check=1]="Check",e[e.Consume=2]="Consume",e))(Q||{}),X=(e=>(e[e.Active=0]="Active",e[e.Passive=1]="Passive",e))(X||{}),Z=(e=>(e[e.Move=0]="Move",e[e.NormalAttack=1]="NormalAttack",e[e.UseAbility=2]="UseAbility",e[e.Shield=3]="Shield",e[e.Fix=4]="Fix",e[e.Energy=5]="Energy",e[e.Buff=6]="Buff",e[e.DirectDamage=7]="DirectDamage",e[e.MutualDamage=8]="MutualDamage",e))(Z||{}),O=(e=>(e[e.None=0]="None",e[e.Self=1]="Self",e[e.Opponent=2]="Opponent",e))(O||{}),M=(e=>(e[e.Top=0]="Top",e[e.Head=1]="Head",e[e.Body=2]="Body",e[e.Front=3]="Front",e[e.Hand=4]="Hand",e[e.Weapon=5]="Weapon",e[e.Feet=6]="Feet",e[e.Ground=7]="Ground",e[e.TopFront=8]="TopFront",e[e.TopBehind=9]="TopBehind",e[e.TopTop=10]="TopTop",e))(M||{}),ee=(e=>(e[e.None=0]="None",e[e.Attack=1]="Attack",e[e.BigAttack=2]="BigAttack",e[e.Heal=3]="Heal",e[e.ShieldBlock=4]="ShieldBlock",e))(ee||{}),W=(e=>(e[e.None=0]="None",e[e.Explosion=1]="Explosion",e[e.Shield=2]="Shield",e[e.Aura=3]="Aura",e[e.Dash=4]="Dash",e[e.Nuclear=5]="Nuclear",e[e.Dust=6]="Dust",e[e.Hit_Large=7]="Hit_Large",e[e.Hit_Small=8]="Hit_Small",e[e.Splatter_Small=9]="Splatter_Small",e[e.Heal=10]="Heal",e))(W||{}),re=(e=>(e[e.Monument=0]="Monument",e[e.SandTable=1]="SandTable",e[e.WarHorn=2]="WarHorn",e))(re||{}),ae=(e=>(e[e.Death=0]="Death",e[e.Burn=1]="Burn",e[e.Freeze=2]="Freeze",e[e.Wund=3]="Wund",e[e.Bleed=4]="Bleed",e[e.Vamp=5]="Vamp",e[e.Life=6]="Life",e[e.Dex=7]="Dex",e[e.Strength=8]="Strength",e[e.Spike=9]="Spike",e[e.Iron=10]="Iron",e[e.Heal=11]="Heal",e))(ae||{}),te=(e=>(e[e.Self=0]="Self",e[e.Opponent=1]="Opponent",e))(te||{}),le=(e=>(e[e.Apply=0]="Apply",e[e.Frame=1]="Frame",e[e.GetHit=2]="GetHit",e[e.Hit=3]="Hit",e[e.Passive=4]="Passive",e))(le||{}),ne=(e=>(e[e.None=0]="None",e[e.Ruby=1]="Ruby",e[e.Sapphire=2]="Sapphire",e[e.Active=0]="Active",e[e.Topaz=3]="Topaz",e))(ne||{}),ie=(e=>(e[e.All=0]="All",e[e.ComboOnly=1]="ComboOnly",e[e.ShopOnly=2]="ShopOnly",e))(ie||{}),oe=(e=>(e[e.All=0]="All",e[e.Ruby=1]="Ruby",e[e.Topaz=2]="Topaz",e[e.Sapphire=3]="Sapphire",e))(oe||{}),pe=(e=>(e[e.Time=0]="Time",e[e.Move=1]="Move",e[e.Attack=2]="Attack",e[e.UseAbility=3]="UseAbility",e[e.Block=4]="Block",e[e.Hit=5]="Hit",e[e.BeingHit=6]="BeingHit",e[e.Fix=7]="Fix",e[e.HpDrop=8]="HpDrop",e[e.GamePhase=9]="GamePhase",e[e.ApplyBuff=10]="ApplyBuff",e[e.ApplyDebuff=11]="ApplyDebuff",e[e.EarnShield=12]="EarnShield",e))(pe||{}),se=(e=>(e[e.Self=0]="Self",e[e.Enemy=1]="Enemy",e))(se||{}),ue=(e=>(e[e.DesignStrings=0]="DesignStrings",e[e.CodeStrings=1]="CodeStrings",e))(ue||{}),me=(e=>(e[e.English=0]="English",e[e.Chinese=1]="Chinese",e[e.ChineseTraditional=2]="ChineseTraditional",e[e.French=3]="French",e))(me||{});const tr=e=>U({url:"/admin/AdminDesignManagement/LoadDesignData",method:"get",params:{designName:e,_t:new Date().getTime()},headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),lr=e=>U({url:"/admin/AdminDesignManagement/UpsertDesignRow",method:"post",data:e});function nr(e){return U({url:"/admin/AdminDesignManagement/DeleteDesignRow",method:"post",params:e,data:{}})}function ir(e){return U({url:"/admin/AdminDesignManagement/RefreshOSSOfOneDesign",method:"post",data:{designName:e}})}const r=e=>e==="Id"?"80":e.includes("Name")?"150":e.includes("Description")?"250":Math.max(e.length*10+20,80)+"",or={HWAbilityDesign:{tableColumns:[{label:"Id",prop:"AbilityDesignId",width:r("Id")},{label:"AbilityName",prop:"AbilityName",width:r("AbilityName")},{label:"AbilityType",prop:"AbilityType",width:r("AbilityType"),type:"enum",enumType:E},{label:"Argument",prop:"Argument",width:r("Argument")},{label:"Ammo",prop:"Ammo",width:r("Ammo")},{label:"EffectDesignId",prop:"EffectDesignId",width:r("EffectDesignId")},{label:"EnergyConsume",prop:"EnergyConsume",width:r("EnergyConsume")},{label:"AbilityDescription",prop:"AbilityDescription",width:r("AbilityDescription")},{label:"AttachBuffs",prop:"AttachBuffs",width:r("AttachBuffs")},{label:"AbilityBuffUsage",prop:"AbilityBuffUsage",width:r("AbilityBuffUsage"),type:"enum",enumType:Q},{label:"AbilityEnhanceScale",prop:"AbilityEnhanceScale",width:r("AbilityEnhanceScale")},{label:"AbilityAttribute",prop:"AbilityAttribute",width:r("AbilityAttribute"),type:"enum",enumType:Y},{label:"EffectType",prop:"EffectType",width:r("EffectType"),type:"enum",enumType:W}],formFields:[{label:"Id",prop:"AbilityDesignId",type:"number",precision:0},{label:"AbilityName",prop:"AbilityName"},{label:"AbilityType",prop:"AbilityType",type:"enum",enumType:E},{label:"Argument",prop:"Argument",type:"number",precision:0},{label:"Ammo",prop:"Ammo",type:"number",precision:0},{label:"EffectDesignId",prop:"EffectDesignId",type:"number",precision:0},{label:"EnergyConsume",prop:"EnergyConsume",type:"number",precision:0},{label:"AbilityDescription",prop:"AbilityDescription"},{label:"AttachBuffs",prop:"AttachBuffs"},{label:"AbilityBuffUsage",prop:"AbilityBuffUsage",type:"enum",enumType:Q},{label:"AbilityEnhanceScale",prop:"AbilityEnhanceScale",type:"number",precision:2},{label:"AbilityAttribute",prop:"AbilityAttribute",type:"enum",enumType:Y},{label:"EffectType",prop:"EffectType",type:"enum",enumType:W}],rules:{AbilityName:[{required:!0,message:"Please enter the name",trigger:"blur"}],AbilityType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWActionDesign:{tableColumns:[{label:"Id",prop:"ActionDesignId",width:r("Id")},{label:"ActionDesignName",prop:"ActionDesignName",width:r("ActionDesignName")},{label:"Consume",prop:"Consume",width:r("Consume")},{label:"ActionType",prop:"ActionType",width:r("ActionType"),type:"enum",enumType:X},{label:"ActionSubType",prop:"ActionSubType",width:r("ActionSubType"),type:"enum",enumType:Z},{label:"Argument",prop:"Argument",width:r("Argument")},{label:"Period",prop:"Period",width:r("Period")},{label:"DescriptionString",prop:"DescriptionString",width:r("DescriptionString")},{label:"EffectType",prop:"EffectType",width:r("EffectType"),type:"enum",enumType:W},{label:"ChipUsage",prop:"ChipUsage",width:r("ChipUsage"),type:"enum",enumType:ie}],formFields:[{label:"Id",prop:"ActionDesignId",type:"number",precision:0},{label:"ActionDesignName",prop:"ActionDesignName"},{label:"Consume",prop:"Consume",type:"number",precision:0},{label:"ActionType",prop:"ActionType",type:"enum",enumType:X},{label:"ActionSubType",prop:"ActionSubType",type:"enum",enumType:Z},{label:"Argument",prop:"Argument",type:"number",precision:0},{label:"Period",prop:"Period",type:"number",precision:0},{label:"DescriptionString",prop:"DescriptionString"},{label:"EffectType",prop:"EffectType",type:"enum",enumType:W},{label:"ChipUsage",prop:"ChipUsage",type:"enum",enumType:ie}],rules:{ActionDesignName:[{required:!0,message:"Please enter the name",trigger:"blur"}],ActionType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWActionEffectDesign:{tableColumns:[{label:"Id",prop:"ActionEffectDesignId",width:r("Id")},{label:"FromAnchorTarget",prop:"FromAnchorTarget",width:r("FromAnchorTarget"),type:"enum",enumType:O},{label:"FromAnchorType",prop:"FromAnchorType",width:r("FromAnchorType"),type:"enum",enumType:M},{label:"ToAnchorTarget",prop:"ToAnchorTarget",width:r("ToAnchorTarget"),type:"enum",enumType:O},{label:"ToAnchorType",prop:"ToAnchorType",width:r("ToAnchorType"),type:"enum",enumType:M},{label:"EffectAssetKey",prop:"EffectAssetKey",width:r("EffectAssetKey")},{label:"FeedbackType",prop:"FeedbackType",width:r("FeedbackType"),type:"enum",enumType:ee},{label:"Description",prop:"Description",width:r("Description")}],formFields:[{label:"Id",prop:"ActionEffectDesignId",type:"number",precision:0},{label:"FromAnchorTarget",prop:"FromAnchorTarget",type:"enum",enumType:O},{label:"FromAnchorType",prop:"FromAnchorType",type:"enum",enumType:M},{label:"ToAnchorTarget",prop:"ToAnchorTarget",type:"enum",enumType:O},{label:"ToAnchorType",prop:"ToAnchorType",type:"enum",enumType:M},{label:"EffectAssetKey",prop:"EffectAssetKey"},{label:"FeedbackType",prop:"FeedbackType",type:"enum",enumType:ee},{label:"Description",prop:"Description"}],rules:{FromAnchorType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWBaseFurnitureDesign:{tableColumns:[{label:"Id",prop:"BaseFurnitureDesignId",width:r("Id")},{label:"FurnitureName",prop:"FurnitureName",width:r("FurnitureName")},{label:"BaseFurnitureType",prop:"BaseFurnitureType",width:r("BaseFurnitureType"),type:"enum",enumType:re},{label:"SpriteKey",prop:"SpriteKey",width:r("SpriteKey")},{label:"FurnitureDescription",prop:"FurnitureDescription",width:r("FurnitureDescription")}],formFields:[{label:"Id",prop:"BaseFurnitureDesignId",type:"number",precision:0},{label:"FurnitureName",prop:"FurnitureName"},{label:"BaseFurnitureType",prop:"BaseFurnitureType",type:"enum",enumType:re},{label:"SpriteKey",prop:"SpriteKey"},{label:"FurnitureDescription",prop:"FurnitureDescription"}],rules:{FurnitureName:[{required:!0,message:"Please enter the name",trigger:"blur"}],BaseFurnitureType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWBuffDesign:{tableColumns:[{label:"Id",prop:"BuffDesignId",width:r("Id")},{label:"BuffType",prop:"BuffType",width:r("BuffType"),type:"enum",enumType:ae},{label:"BuffPeriod",prop:"BuffPeriod",width:r("BuffPeriod")},{label:"BuffTarget",prop:"BuffTarget",width:r("BuffTarget"),type:"enum",enumType:te},{label:"BuffName",prop:"BuffName",width:r("BuffName")},{label:"BuffDescription",prop:"BuffDescription",width:r("BuffDescription")},{label:"BasicArgument",prop:"BasicArgument",width:r("BasicArgument")},{label:"ScaleArgument",prop:"ScaleArgument",width:r("ScaleArgument")},{label:"Timing",prop:"Timing",width:r("Timing"),type:"enum",enumType:le}],formFields:[{label:"Id",prop:"BuffDesignId",type:"number",precision:0},{label:"BuffType",prop:"BuffType",type:"enum",enumType:ae},{label:"BuffPeriod",prop:"BuffPeriod",type:"number",precision:0},{label:"BuffTarget",prop:"BuffTarget",type:"enum",enumType:te},{label:"BuffName",prop:"BuffName"},{label:"BuffDescription",prop:"BuffDescription"},{label:"BasicArgument",prop:"BasicArgument",type:"number",precision:0},{label:"ScaleArgument",prop:"ScaleArgument",type:"number",precision:2},{label:"Timing",prop:"Timing",type:"enum",enumType:le}],rules:{BuffName:[{required:!0,message:"Please enter the name",trigger:"blur"}],BuffType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWCharacterDesign:{tableColumns:[{label:"Id",prop:"CharacterDesignId",width:r("Id")},{label:"CharacterDesignName",prop:"CharacterDesignName",width:r("CharacterDesignName")},{label:"CharacterDesignClass",prop:"CharacterDesignClass",width:r("CharacterDesignClass")},{label:"BasicAttackAbilityId",prop:"BasicAttackAbilityId",width:r("BasicAttackAbilityId")},{label:"AbilityIds",prop:"AbilityIds",width:r("AbilityIds")},{label:"BasicAttackValue",prop:"BasicAttackValue",width:r("BasicAttackValue")},{label:"Hp",prop:"Hp",width:r("Hp")},{label:"ActionSpeedInFrame",prop:"ActionSpeedInFrame",width:r("ActionSpeedInFrame")},{label:"AbilityAttributesString",prop:"AbilityAttributesString",width:r("AbilityAttributesString")},{label:"DefaultEvents",prop:"DefaultEvents",width:r("DefaultEvents")},{label:"DefaultActions",prop:"DefaultActions",width:r("DefaultActions")},{label:"DefaultAIGraphJson",prop:"DefaultAIGraphJson",width:r("DefaultAIGraphJson")}],formFields:[{label:"Id",prop:"CharacterDesignId",type:"number",precision:0},{label:"CharacterDesignName",prop:"CharacterDesignName"},{label:"CharacterDesignClass",prop:"CharacterDesignClass"},{label:"BasicAttackAbilityId",prop:"BasicAttackAbilityId",type:"number",precision:0},{label:"AbilityIds",prop:"AbilityIds"},{label:"BasicAttackValue",prop:"BasicAttackValue",type:"number",precision:0},{label:"Hp",prop:"Hp",type:"number",precision:0},{label:"ActionSpeedInFrame",prop:"ActionSpeedInFrame",type:"number",precision:0},{label:"AbilityAttributesString",prop:"AbilityAttributesString"},{label:"DefaultEvents",prop:"DefaultEvents"},{label:"DefaultActions",prop:"DefaultActions"},{label:"DefaultAIGraphJson",prop:"DefaultAIGraphJson"}],rules:{CharacterDesignName:[{required:!0,message:"Please enter the name",trigger:"blur"}]}},HWChipAffixDesign:{tableColumns:[{label:"Id",prop:"ChipAffixDesignId",width:r("Id")},{label:"SpeedIncrease",prop:"SpeedIncrease",width:r("SpeedIncrease")},{label:"HpIncrease",prop:"HpIncrease",width:r("HpIncrease")},{label:"AtkIncrease",prop:"AtkIncrease",width:r("AtkIncrease")},{label:"BuffToApply",prop:"BuffToApply",width:r("BuffToApply")},{label:"TargetChipType",prop:"TargetChipType",width:r("TargetChipType"),type:"enum",enumType:ne},{label:"AffixLevel",prop:"AffixLevel",width:r("AffixLevel")},{label:"AffixName",prop:"AffixName",width:r("AffixName")},{label:"AffixDescription",prop:"AffixDescription",width:r("AffixDescription")}],formFields:[{label:"Id",prop:"ChipAffixDesignId",type:"number",precision:0},{label:"SpeedIncrease",prop:"SpeedIncrease",type:"number",precision:0},{label:"HpIncrease",prop:"HpIncrease",type:"number",precision:0},{label:"AtkIncrease",prop:"AtkIncrease",type:"number",precision:0},{label:"BuffToApply",prop:"BuffToApply"},{label:"TargetChipType",prop:"TargetChipType",type:"enum",enumType:ne},{label:"AffixLevel",prop:"AffixLevel",type:"number",precision:0},{label:"AffixName",prop:"AffixName"},{label:"AffixDescription",prop:"AffixDescription"}],rules:{AffixName:[{required:!0,message:"Please enter the name",trigger:"blur"}],TargetChipType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWChipPackDesign:{tableColumns:[{label:"Id",prop:"ChipPackDesignId",width:r("Id")},{label:"ChipPackName",prop:"ChipPackName",width:r("ChipPackName")},{label:"ChipPackPrice",prop:"ChipPackPrice",width:r("ChipPackPrice")},{label:"ChipPackType",prop:"ChipPackType",width:r("ChipPackType"),type:"enum",enumType:oe},{label:"ChipPackDescription",prop:"ChipPackDescription",width:r("ChipPackDescription")}],formFields:[{label:"Id",prop:"ChipPackDesignId",type:"number",precision:0},{label:"ChipPackName",prop:"ChipPackName"},{label:"ChipPackPrice",prop:"ChipPackPrice",type:"number",precision:0},{label:"ChipPackType",prop:"ChipPackType",type:"enum",enumType:oe},{label:"ChipPackDescription",prop:"ChipPackDescription"}],rules:{ChipPackName:[{required:!0,message:"Please enter the name",trigger:"blur"}],ChipPackType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWComboDesign:{tableColumns:[{label:"Id",prop:"ComboDesignId",width:r("Id")},{label:"ComboString",prop:"ComboString",width:r("ComboString")},{label:"ComboActionId",prop:"ComboActionId",width:r("ComboActionId")},{label:"ComboDescription",prop:"ComboDescription",width:r("ComboDescription")}],formFields:[{label:"Id",prop:"ComboDesignId",type:"number",precision:0},{label:"ComboString",prop:"ComboString"},{label:"ComboActionId",prop:"ComboActionId",type:"number",precision:0},{label:"ComboDescription",prop:"ComboDescription"}],rules:{}},HWEventDesign:{tableColumns:[{label:"Id",prop:"EventDesignId",width:r("Id")},{label:"EventDesignName",prop:"EventDesignName",width:r("EventDesignName")},{label:"EventTarget",prop:"EventTarget",width:r("EventTarget"),type:"enum",enumType:se},{label:"EventType",prop:"EventType",width:r("EventType"),type:"enum",enumType:pe},{label:"Argument",prop:"Argument",width:r("Argument")},{label:"GeneratePower",prop:"GeneratePower",width:r("GeneratePower")},{label:"DescriptionString",prop:"DescriptionString",width:r("DescriptionString")}],formFields:[{label:"Id",prop:"EventDesignId",type:"number",precision:0},{label:"EventDesignName",prop:"EventDesignName"},{label:"EventTarget",prop:"EventTarget",type:"enum",enumType:se},{label:"EventType",prop:"EventType",type:"enum",enumType:pe},{label:"Argument",prop:"Argument",type:"number",precision:0},{label:"GeneratePower",prop:"GeneratePower",type:"number",precision:0},{label:"DescriptionString",prop:"DescriptionString"}],rules:{EventDesignName:[{required:!0,message:"Please enter the name",trigger:"blur"}],EventType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWIapDesign:{tableColumns:[{label:"Id",prop:"IapDesignId",width:r("Id")},{label:"Name",prop:"Name",width:r("Name")},{label:"IapType",prop:"IapType",width:r("IapType")},{label:"Title",prop:"Title",width:r("Title")},{label:"Subtitle",prop:"Subtitle",width:r("Subtitle")},{label:"Description",prop:"Description",width:r("Description")},{label:"RewardString",prop:"RewardString",width:r("RewardString")},{label:"OrderIndex",prop:"OrderIndex",width:r("OrderIndex")},{label:"PackId",prop:"PackId",width:r("PackId")}],formFields:[{label:"Id",prop:"IapDesignId",type:"number",precision:0},{label:"Name",prop:"Name"},{label:"IapType",prop:"IapType",type:"number",precision:0},{label:"Title",prop:"Title"},{label:"Subtitle",prop:"Subtitle"},{label:"Description",prop:"Description"},{label:"RewardString",prop:"RewardString"},{label:"OrderIndex",prop:"OrderIndex",type:"number",precision:0},{label:"PackId",prop:"PackId"}],rules:{Name:[{required:!0,message:"Please enter the name",trigger:"blur"}],IapType:[{required:!0,message:"Please select the type",trigger:"change"}]}},HWTranslateDesign:{tableColumns:[{label:"Id",prop:"TranslateDesignId",width:r("Id")},{label:"Message",prop:"Message",width:r("Message")},{label:"LanguageType",prop:"LanguageType",width:r("LanguageType"),type:"enum",enumType:me},{label:"Translation",prop:"Translation",width:r("Translation")},{label:"StringSourceType",prop:"StringSourceType",width:r("StringSourceType"),type:"enum",enumType:ue}],formFields:[{label:"Id",prop:"TranslateDesignId",type:"number",precision:0},{label:"Message",prop:"Message"},{label:"LanguageType",prop:"LanguageType",type:"enum",enumType:me},{label:"Translation",prop:"Translation"},{label:"StringSourceType",prop:"StringSourceType",type:"enum",enumType:ue}],rules:{LanguageType:[{required:!0,message:"Please select the type",trigger:"change"}]}}},pr=e=>or[e]||{},sr={class:"design-container"},ur={class:"design-sidebar"},mr={class:"design-content"},dr={key:0,class:"error-container"},cr={class:"table-header"},gr={class:"header-content"},br={class:"table-operations"},hr={class:"column-header"},yr={class:"header-title"},Dr={class:"column-header"},vr={class:"header-title"},Ar={class:"pagination-container"},fr=Je({__name:"index",setup(e){const de=Qe(),Ce=Xe(),b=C(()=>de.params.name),R=C(()=>pr(b.value)),z=C(()=>R.value.tableColumns||[]),Se=C(()=>R.value.formFields||[]),_e=C(()=>R.value.rules||{}),ce=c([]),N=c(!1),L=c(""),h=c({}),K=c(!1);c("");const A=c(""),P=c("ascending"),k=c({}),F=c(1),x=c(50),$=c(!1),ge=C(()=>{let l=[...ce.value];return Object.entries(k.value).forEach(([t,y])=>{y&&(l=l.filter(f=>{const d=f[t],o=z.value.find(I=>I.prop===t);return(o==null?void 0:o.type)==="enum"?q(d,o.enumType)===y:typeof d=="number"?d.toString().includes(y):typeof d=="string"?d.toLowerCase().includes(y.toLowerCase()):!1}))}),A.value&&l.sort((t,y)=>{let f=t[A.value],d=y[A.value];const o=z.value.find(B=>B.prop===A.value);if((o==null?void 0:o.type)==="enum"&&(f=q(f,o.enumType),d=q(d,o.enumType)),f===d)return 0;const I=f>d?1:-1;return P.value==="ascending"?I:-I}),l}),Ne=C(()=>{const l=(F.value-1)*x.value,t=l+x.value;return ge.value.slice(l,t)}),ke=({prop:l,order:t})=>{A.value=l,P.value=t||"ascending"},Pe=()=>{},Fe=()=>{k.value={},A.value="",P.value="ascending"},q=(l,t)=>t[l]||"Unknown",be=l=>Object.keys(l).filter(t=>isNaN(Number(t))).map(t=>({label:t,value:l[t]})),G=async()=>{K.value=!0,Fe();try{const l=await tr(b.value);ce.value=l.data?JSON.parse(l.data.toString()):[]}catch(l){console.error("Failed to load design data:",l),_.error("加载设计数据失败")}finally{K.value=!1}},xe=()=>{h.value={},L.value="Add New Row",N.value=!0},Be=l=>{h.value={...l},L.value="Edit Row",N.value=!0},He=async()=>{try{await lr({designName:b.value,designData:h.value}),N.value=!1,_.success("Saved successfully"),G()}catch(l){console.error(l),_.error("Save failed")}},Te=l=>{er.confirm("Are you sure to delete this row?","Warning",{confirmButtonText:"Yes",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{console.log(`${b.value}Id`.replace("HW",""));try{await nr({designName:b.value,designId:l[`${b.value}Id`.replace("HW","")]}),_.success("Delete successfully"),G()}catch(t){console.error(t),_.error("Delete failed")}})},Ve=async()=>{$.value=!0;try{await ir(b.value),_.success("OSS 刷新成功")}catch(l){console.error("Failed to refresh OSS:",l),_.error("OSS 刷新失败")}finally{$.value=!1}};je(()=>de.params.name,()=>{G()});const Oe=l=>{Ce.push(`/design/${l}`)},Me=l=>{x.value=l,F.value=1},We=l=>{F.value=l};return Ee(()=>{G()}),(l,t)=>{const y=s("el-icon"),f=s("el-menu-item"),d=s("el-menu"),o=s("el-button"),I=s("el-empty"),B=s("el-table-column"),he=s("el-option"),ye=s("el-select"),Re=s("el-tag"),De=s("el-input"),qe=s("el-table"),Ge=s("el-pagination"),Ue=s("el-input-number"),ze=s("el-form-item"),Le=s("el-form"),Ke=s("el-dialog"),$e=Ze("loading");return i(),v("div",sr,[g("div",ur,[p(d,{"default-active":b.value,class:"design-menu",onSelect:Oe},{default:n(()=>[(i(!0),v(S,null,T(V(rr),a=>(i(),u(f,{key:a.name,index:a.name},{default:n(()=>[p(y,null,{default:n(()=>[(i(),u(j(a.icon)))]),_:2},1024),g("span",null,H(a.title),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),g("div",mr,[R.value.tableColumns?(i(),v(S,{key:1},[g("div",cr,[g("div",gr,[g("h2",null,H(b.value),1),g("div",br,[p(o,{type:"primary",onClick:xe},{default:n(()=>t[8]||(t[8]=[D("Add New")])),_:1}),p(o,{type:"warning",onClick:Ve,loading:$.value},{default:n(()=>t[9]||(t[9]=[D(" Refresh OSS ")])),_:1},8,["loading"])])])]),Ye((i(),u(qe,{data:Ne.value,style:{width:"100%"},"max-height":"70vh",onSortChange:ke},{default:n(()=>[p(B,{label:"Operations",width:"150"},{default:n(({row:a})=>[p(o,{type:"primary",size:"small",onClick:m=>Be(a)},{default:n(()=>t[10]||(t[10]=[D(" Edit ")])),_:2},1032,["onClick"]),p(o,{type:"danger",size:"small",onClick:m=>Te(a)},{default:n(()=>t[11]||(t[11]=[D(" Delete ")])),_:2},1032,["onClick"])]),_:1}),(i(!0),v(S,null,T(z.value,(a,m)=>(i(),v(S,{key:a.prop},[a.type==="enum"?(i(),u(B,ve({key:0,ref_for:!0},a,{sortable:"custom",fixed:m===0?"left":!1}),{header:n(({column:J})=>[g("div",hr,[g("div",yr,[D(H(a.label)+" ",1),A.value===a.prop?(i(),u(y,{key:0,class:"sort-icon"},{default:n(()=>[(i(),u(j(P.value==="ascending"?V(Ae):V(fe))))]),_:1})):Ie("",!0)]),p(ye,{modelValue:k.value[a.prop],"onUpdate:modelValue":w=>k.value[a.prop]=w,size:"small",placeholder:"Filter",clearable:"",class:"column-filter",onClick:t[1]||(t[1]=we(()=>{},["stop"]))},{default:n(()=>[(i(!0),v(S,null,T(be(a.enumType),w=>(i(),u(he,{key:w.value,label:w.label,value:w.label},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:n(({row:J})=>[p(Re,null,{default:n(()=>[D(H(q(J[a.prop],a.enumType)),1)]),_:2},1024)]),_:2},1040,["fixed"])):(i(),u(B,ve({key:1,ref_for:!0},a,{sortable:"custom",fixed:m===0?"left":!1}),{header:n(({column:J})=>[g("div",Dr,[g("div",vr,[D(H(a.label)+" ",1),A.value===a.prop?(i(),u(y,{key:0,class:"sort-icon"},{default:n(()=>[(i(),u(j(P.value==="ascending"?V(Ae):V(fe))))]),_:1})):Ie("",!0)]),p(De,{modelValue:k.value[a.prop],"onUpdate:modelValue":w=>k.value[a.prop]=w,size:"small",placeholder:"Search",onInput:Pe,onClick:t[2]||(t[2]=we(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1040,["fixed"]))],64))),128))]),_:1},8,["data"])),[[$e,K.value]]),g("div",Ar,[p(Ge,{"current-page":F.value,"onUpdate:currentPage":t[3]||(t[3]=a=>F.value=a),"page-size":x.value,"onUpdate:pageSize":t[4]||(t[4]=a=>x.value=a),total:ge.value.length,"page-sizes":[50,100,200],layout:"total, sizes, prev, pager, next",onSizeChange:Me,onCurrentChange:We},null,8,["current-page","page-size","total"])]),p(Ke,{title:L.value,modelValue:N.value,"onUpdate:modelValue":t[6]||(t[6]=a=>N.value=a),width:"600px"},{footer:n(()=>[p(o,{onClick:t[5]||(t[5]=a=>N.value=!1)},{default:n(()=>t[12]||(t[12]=[D("Cancel")])),_:1}),p(o,{type:"primary",onClick:He},{default:n(()=>t[13]||(t[13]=[D("Save")])),_:1})]),default:n(()=>[p(Le,{ref:"formRef",model:h.value,rules:_e.value,"label-width":"120px"},{default:n(()=>[(i(!0),v(S,null,T(Se.value,a=>(i(),u(ze,{key:a.prop,label:a.label,prop:a.prop},{default:n(()=>[a.type==="enum"?(i(),u(ye,{key:0,modelValue:h.value[a.prop],"onUpdate:modelValue":m=>h.value[a.prop]=m,placeholder:`Select ${a.label.toLowerCase()}`},{default:n(()=>[(i(!0),v(S,null,T(be(a.enumType),m=>(i(),u(he,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):a.type==="number"?(i(),u(Ue,{key:1,modelValue:h.value[a.prop],"onUpdate:modelValue":m=>h.value[a.prop]=m,precision:a.precision||0},null,8,["modelValue","onUpdate:modelValue","precision"])):(i(),u(De,{key:2,modelValue:h.value[a.prop],"onUpdate:modelValue":m=>h.value[a.prop]=m,type:a.inputType||"text"},null,8,["modelValue","onUpdate:modelValue","type"]))]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])],64)):(i(),v("div",dr,[p(I,{description:`Design configuration for '${b.value}' not found`},{extra:n(()=>[p(o,{type:"primary",onClick:t[0]||(t[0]=a=>l.$router.push("/design"))},{default:n(()=>t[7]||(t[7]=[D(" Back to Design List ")])),_:1})]),_:1},8,["description"])]))])])}}}),Sr=ar(fr,[["__scopeId","data-v-84f779e4"]]);export{Sr as default};
//# sourceMappingURL=index-DYRw7u8h.js.map
